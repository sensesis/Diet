<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <!-- CSS íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë§í¬ (ê²½ë¡œê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸ í•„ìš”) -->
    <link href="/main.css" rel="stylesheet">

    <!-- êµ¬ê¸€ í°íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸° -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800&display=swap" rel="stylesheet">
</head>
<body>

<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°”ë¥¼ Thymeleaf í…œí”Œë¦¿ìœ¼ë¡œ ê°€ì ¸ì˜´ -->
<div th:replace="~{nav.html :: navbar}"></div>
<a href="/signup">SignUp</a>

<!-- ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•˜ëŠ” ë¶€ë¶„ (Thymeleaf ë°˜ë³µë¬¸) -->
<div class="card" th:each="i : ${cloths}">
    <img src="https://placehold.co/300" alt="Cloth Image">
    <div>
        <h4>ID: <span th:text="${i.id}"></span></h4>
        <h4>Name: <span th:text="${i.name}"></span></h4>
        <h4>Type: <span th:text="${i.type}"></span></h4>
        <a th:href="@{/edit/{id}(id=${i.id})}">ìˆ˜ì •</a>
        <span style="cursor: pointer;" data-id="[[${i.id}]]" onclick="deleteCloth(this)">ğŸ—‘ï¸</span>
    </div>
</div>
<script>
    function deleteCloth(element) {
        // í´ë¦­ëœ span ìš”ì†Œì—ì„œ data-id ê°’ì„ ê°€ì ¸ì˜´
        const id = element.getAttribute("data-id");

        if (confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            fetch(`/cloth/${id}`, {
                method: 'DELETE'
            })
                .then(response => {
                    if (response.ok) {
                        alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                        location.reload(); // ì‚­ì œ í›„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
                    } else {
                        alert('ì‚­ì œ ì‹¤íŒ¨');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }
    }


</script>

</body>
</html>
